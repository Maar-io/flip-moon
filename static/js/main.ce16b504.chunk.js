(this["webpackJsonpflip-moon"]=this["webpackJsonpflip-moon"]||[]).push([[0],{217:function(e,t,n){},230:function(e,t){},253:function(e,t){},255:function(e,t){},332:function(e,t){},334:function(e,t){},366:function(e,t){},371:function(e,t){},373:function(e,t){},380:function(e,t){},393:function(e,t){},477:function(e,t,n){"use strict";n.r(t);var a=n(3),o=n(0),c=n.n(o),s=n(201),i=n.n(s),r=(n(217),n(17)),l=n.n(r),u=n(30),p=n(202),d=n(31),j=n(74),b=n.n(j),h="0xA0886958c8aF74B99402Bba5dF520C8D14AeD0aE",f=[{anonymous:!1,inputs:[{indexed:!1,internalType:"string",name:"messageToPlayer",type:"string"},{indexed:!1,internalType:"address",name:"creator",type:"address"},{indexed:!1,internalType:"uint256",name:"toTransfer",type:"uint256"}],name:"coinFlipResult",type:"event"},{anonymous:!1,inputs:[{indexed:!1,internalType:"address",name:"adr",type:"address"}],name:"playerRegistered",type:"event"},{inputs:[],name:"balance",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function",constant:!0},{inputs:[{internalType:"uint256",name:"",type:"uint256"}],name:"creators",outputs:[{internalType:"address payable",name:"",type:"address"}],stateMutability:"view",type:"function",constant:!0},{inputs:[],name:"owner",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function",constant:!0},{inputs:[],name:"depositFunds",outputs:[],stateMutability:"payable",type:"function",payable:!0},{inputs:[{internalType:"bool",name:"betOnHead",type:"bool"}],name:"flipCoin",outputs:[],stateMutability:"payable",type:"function",payable:!0},{inputs:[],name:"getPlayerData",outputs:[{internalType:"uint256",name:"won",type:"uint256"},{internalType:"uint256",name:"lost",type:"uint256"},{internalType:"uint256",name:"plays",type:"uint256"}],stateMutability:"view",type:"function",constant:!0},{inputs:[],name:"getContractBalance",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function",constant:!0},{inputs:[],name:"withdrawAll",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"nonpayable",type:"function"}],y=n(482),m=n(483),O=n(488),x=n(484),g=n(208),w=n(487),v=n(486),T=n(485),k=n(481);function C(e){return Object(a.jsxs)(k.a,{striped:!0,bordered:!0,children:[Object(a.jsx)("thead",{children:Object(a.jsxs)("tr",{children:[Object(a.jsx)("th",{children:"Contract Balance"}),Object(a.jsx)("th",{children:"Your Balance"})]})}),Object(a.jsx)("tbody",{children:Object(a.jsxs)("tr",{children:[Object(a.jsx)("td",{children:e.contractBal}),Object(a.jsx)("td",{children:e.accountBal})]})})]})}function B(e){var t="https://robohash.org/"+e.account;return Object(a.jsxs)(a.Fragment,{children:[Object(a.jsxs)("h6",{children:["Connected account: ",e.account]}),Object(a.jsx)("img",{img:!0,src:t,height:"120",alt:"RoboHash"})]})}var M=n(204);function A(){var e=Object(p.a)(["\n  .jumbo {\n    background: \n    linear-gradient(\n      rgb(29, 37, 82), \n      rgb(83, 203, 200)\n    );\n  }\n"]);return A=function(){return e},e}var F,R="https://rpc.testnet.moonbeam.network",E="0x8F10433FC11b70a15128aAF0b30B906627808296",D="result \u2754",P="1000",S=new b.a(b.a.givenProvider||"http://localhost:9933");console.log("web3 version = "+S.version);var V=function(){var e=[{name:"0.01 DEV",value:"10"},{name:"0.02 DEV",value:"20"},{name:"0.05 DEV",value:"50"},{name:"0.1 DEV",value:"100"}],t=Object(o.useState)(""),n=Object(d.a)(t,2),c=n[0],s=n[1],i=Object(o.useState)(0),r=Object(d.a)(i,2),p=r[0],j=r[1],k=Object(o.useState)(0),V=Object(d.a)(k,2),W=V[0],Y=V[1],N=Object(o.useState)(D),H=Object(d.a)(N,2),I=H[0],J=H[1],L=Object(o.useState)(!1),q=Object(d.a)(L,2),z=q[0],G=q[1],K=Object(o.useState)({}),Q=Object(d.a)(K,2),U=Q[0],X=Q[1],Z=Object(o.useState)(e[0].value),$=Object(d.a)(Z,2),_=$[0],ee=$[1],te=M.a.div(A());function ne(){return(ne=Object(u.a)(l.a.mark((function e(){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!window.ethereum){e.next=8;break}return window.web3=new b.a(R),e.next=4,window.ethereum.enable();case 4:G(!0),console.log("connected ",z),e.next=9;break;case 8:window.alert("Non-Ethereum browser detected. You should consider trying MetaMask!");case 9:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function ae(){return(ae=Object(u.a)(l.a.mark((function e(){var t,n;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,S.eth.net.getNetworkType();case 2:return t=e.sent,console.log(t),console.log("load connected ",z),e.next=7,S.eth.getAccounts();case 7:n=e.sent,console.log("accounts",n),s(n[0]),console.log("accounts[0]=",n[0]),n[0]&&S.eth.getBalance(n[0]).then((function(e){j(S.utils.fromWei(e,"ether"))})),console.log("Balance in ETH",p),F?console.log("existing contractInstance",F):(F=new S.eth.Contract(f,h,{from:n[0]}),console.log("new contractInstance",F)),de(),se(),oe(),J(D);case 18:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function oe(){return ce.apply(this,arguments)}function ce(){return(ce=Object(u.a)(l.a.mark((function e(){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:console.log("Refresh statistics"),F.methods.getPlayerData().call().then((function(e){console.log("statistics",e),X(e)}));case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function se(){return ie.apply(this,arguments)}function ie(){return(ie=Object(u.a)(l.a.mark((function e(){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:console.log("get Contract Balance"),F.methods.getContractBalance().call().then((function(e){console.log("getContractBalance",e),Y(S.utils.fromWei(e,"ether"))}));case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function re(e){return le.apply(this,arguments)}function le(){return(le=Object(u.a)(l.a.mark((function e(t){var n;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:console.log("flipCoin",c,t),J("waiting blockchain result... \ud83d\udc0c"),n=S.utils.toWei(_,"milli"),F.methods.flipCoin(t).send({from:c,gas:3e6,value:n}).then((function(e){console.log("flipCoin",e)}));case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function ue(){return(ue=Object(u.a)(l.a.mark((function e(){var t;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:console.log("deposit",P),t=S.utils.toWei(P,"milli"),F.methods.depositFunds().send({OWNER:E,gas:3e6,value:t}).on("receipt",(function(e){console.log("deposit receipt",e)})).on("error",(function(e){console.log("deposit err",e)}));case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function pe(){return(pe=Object(u.a)(l.a.mark((function e(){var t;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:console.log("withdrawAll"),t=F.methods.withdrawAll().call().on("receipt",(function(e){console.log("transferedBalance",t),console.log("withdrawAll receipt",e)})).on("error",(function(e){console.log("withdrawAll err",e)}));case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function de(){console.log("set event listeners"),F.events.playerRegistered((function(e,t){console.log("Recieved Event playerRegistered"),e?(console.log("error in playerRegistered"),console.log(e)):console.log("Player "+t.returnValues[0]+" is registered with contract")})),F.events.coinFlipResult((function(e,t){console.log("Recieved Event coinFlipResult"),e?(J("error in coinFlipResult"),console.log("error in coinFlipResult"),console.log(e)):(console.log("flip result",t),t.returnValues[2]>0?(J("You won \ud83d\udc4d"),console.log("You won!!!!!")):(J("You lost \ud83d\udc4e"),console.log("You lost :(")),oe())}))}return Object(o.useEffect)((function(){!function(){ae.apply(this,arguments)}()}),[z,p]),z?Object(a.jsxs)(m.a,{fluid:"md",children:[Object(a.jsxs)(x.a,{children:[Object(a.jsx)(g.a,{}),Object(a.jsx)(g.a,{children:Object(a.jsx)(B,{account:c})})]}),Object(a.jsx)(x.a,{children:Object(a.jsx)(C,{contractBal:W,accountBal:p})}),Object(a.jsxs)(x.a,{children:[Object(a.jsx)(w.a,{border:"info",style:{width:"18rem",margin:5},children:Object(a.jsxs)(w.a.Body,{children:[Object(a.jsx)(w.a.Title,{children:" 1. Pick your bet amount "}),Object(a.jsx)(v.a,{children:Object(a.jsx)("div",{className:"mb-3",children:e.map((function(e,t){return Object(a.jsx)(v.a.Check,{name:"radios",label:e.name,type:"radio",id:e.name,value:e.value,checked:_===e.value,onChange:function(e){return ee(e.currentTarget.value)}})}))})})]})}),Object(a.jsx)(w.a,{border:"info",style:{width:"18rem",margin:5},children:Object(a.jsxs)(w.a.Body,{children:[Object(a.jsx)(w.a.Title,{children:" 2. Press button to place your bet "}),Object(a.jsxs)(w.a.Text,{children:[Object(a.jsx)(O.a,{onClick:function(){return re(!0)},children:"Head"})," ",Object(a.jsx)(O.a,{onClick:function(){return re(!1)},children:"Tail"})]}),Object(a.jsx)(w.a.Footer,{children:Object(a.jsx)("h5",{children:I})})]})}),Object(a.jsx)(w.a,{border:"info",style:{width:"18rem",margin:5},children:Object(a.jsxs)(w.a.Body,{children:[Object(a.jsx)(w.a.Title,{children:" 3. Account statistics"}),Object(a.jsxs)(w.a.Text,{children:["Plays:",U.plays," "]}),Object(a.jsxs)(w.a.Text,{children:["Won:  ",U.won," "]}),Object(a.jsxs)(w.a.Text,{children:["Lost: ",U.lost," "]})]})})]}),Object(a.jsx)(x.a,{children:Object(a.jsxs)(T.a,{children:["Contract address on",Object(a.jsx)("a",{href:"https://docs.moonbeam.network/networks/testnet/",children:" Moonbase Alpha:"})," ",h]})}),c===E?Object(a.jsxs)(x.a,{children:[Object(a.jsx)(O.a,{onClick:function(){return ue.apply(this,arguments)},children:"Deposit"}),Object(a.jsx)(O.a,{onClick:function(){return pe.apply(this,arguments)},children:"withdrawAll"})]}):null]}):Object(a.jsx)(te,{children:Object(a.jsx)(y.a,{fluid:!0,className:"jumbo",children:Object(a.jsxs)(m.a,{children:[Object(a.jsx)("h1",{children:"Coin Flip on Moonbase"}),Object(a.jsx)("p",{children:"This is a simple gambling dApp deployed on the Moonbase Alpha testnet. In order to connect to this app you will need Metamask or similar wallet."}),Object(a.jsxs)("p",{children:[Object(a.jsx)("p",{}),Object(a.jsx)(O.a,{onClick:function(){return ne.apply(this,arguments)},children:"Connect to Moonbase Alpha"})]})]})})})};n(476);i.a.render(Object(a.jsx)(c.a.StrictMode,{children:Object(a.jsx)(V,{})}),document.getElementById("root"))}},[[477,1,2]]]);
//# sourceMappingURL=main.ce16b504.chunk.js.map